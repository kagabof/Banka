{"version":3,"sources":["testTransaction.js"],"names":["chai","use","chaiHttp","should","describe","it","done","trans","amount","chaierId","account","request","app","post","send","end","req","res","have","status","body","be","a","property","eql","cachierId","get"],"mappings":"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","file":"testTransaction.js","sourceRoot":"/home/kagabo/banka1/Banka/server/tests","sourcesContent":["import chai from \"chai\";\nimport chaiHttp from \"chai-http\";\nimport app from \"../app\";\n\nchai.use(chaiHttp);\nchai.should();\n\ndescribe(\"Transaction\", () => {\n    describe(\"POST /\", () => {\n        it(\"should not debit while no account\", (done) => {\n            const trans = {\n                amount: 40000000,\n                chaierId: 2,\n            };\n            const account = \"fofo\";\n            chai.request(app)\n                .post(`/api/v1/${account}/debit`)\n                .send(trans)\n                .end((req, res) => {\n                    res.should.have.status(400);\n                    res.body.should.be.a('object');\n                    res.body.should.have.property(\"error\").eql('account required');\n                    done();\n                });\n        });\n        it(\"should not debit while rong account number\", (done) => {\n            const trans = {\n                amount: 4000,\n                chaierId: 2,\n            };\n            const account = 12345;\n            chai.request(app)\n                .post(`/api/v1/${account}/debit`)\n                .send(trans)\n                .end((req, res) => {\n                    res.should.have.status(400);\n                    res.body.should.be.a('object');\n                    res.body.should.have.property(\"error\").eql('account not found');\n                    done();\n                });\n        });\n\n        it(\"should not debit while no amount\", (done) => {\n            const trans = {\n                amount: \"\",\n                chaierId: 2,\n            };\n            const account = 123456;\n            chai.request(app)\n                .post(`/api/v1/${account}/debit`)\n                .send(trans)\n                .end((req, res) => {\n                    res.should.have.status(400);\n                    res.body.should.be.a('object');\n                    res.body.should.have.property(\"error\").eql('amount required');\n                    done();\n                });\n        });\n\n        it(\"should not debit while amount is greater\", (done) => {\n            const trans = {\n                amount: 40000000,\n                chaierId: 2,\n            };\n            const account = 1234567;\n            chai.request(app)\n                .post(`/api/v1/${account}/debit`)\n                .send(trans)\n                .end((req, res) => {\n                    res.should.have.status(400);\n                    res.body.should.be.a('object');\n                    res.body.should.have.property(\"error\").eql('balance is less than the amount');\n                    done();\n                });\n        });\n\n        it(\"should debit\", (done) => {\n            const trans = {\n                amount: 4000,\n                cachierId: 2,\n            };\n            const account = 1234567;\n            chai.request(app)\n                .post(`/api/v1/${account}/debit`)\n                .send(trans)\n                .end((req, res) => {\n                    res.should.have.status(201);\n                    res.body.should.be.a('object');\n                    res.body.should.have.property(\"data\").should.be.a('object');\n                    done();\n                });\n        });\n        \n        /* for crediting*/\n\n        it(\"should not credit while no account\", (done) => {\n            const trans = {\n                amount: 40000000,\n                chaierId: 2,\n            };\n            const account = \"fofo\";\n            chai.request(app)\n                .post(`/api/v1/${account}/credit`)\n                .send(trans)\n                .end((req, res) => {\n                    res.should.have.status(400);\n                    res.body.should.be.a('object');\n                    res.body.should.have.property(\"error\").eql('account required');\n                    done();\n                });\n        });\n        it(\"should not credit while rong account number\", (done) => {\n            const trans = {\n                amount: 4000,\n                chaierId: 2,\n            };\n            const account = 12345;\n            chai.request(app)\n                .post(`/api/v1/${account}/credit`)\n                .send(trans)\n                .end((req, res) => {\n                    res.should.have.status(400);\n                    res.body.should.be.a('object');\n                    res.body.should.have.property(\"error\").eql('account not found');\n                    done();\n                });\n        });\n\n        it(\"should not credit while no amount\", (done) => {\n            const trans = {\n                amount: \"\",\n                chaierId: 2,\n            };\n            const account = 123456;\n            chai.request(app)\n                .post(`/api/v1/${account}/credit`)\n                .send(trans)\n                .end((req, res) => {\n                    res.should.have.status(400);\n                    res.body.should.be.a('object');\n                    res.body.should.have.property(\"error\").eql('amount required');\n                    done();\n                });\n        });\n\n        it(\"should credit\", (done) => {\n            const trans = {\n                amount: 4000,\n                cachierId: 2,\n            };\n            const account = 1234567;\n            chai.request(app)\n                .post(`/api/v1/${account}/credit`)\n                .send(trans)\n                .end((req, res) => {\n                    res.should.have.status(201);\n                    res.body.should.be.a('object');\n                    res.body.should.have.property(\"data\").should.be.a('object');\n                    done();\n                });\n        });\n     });\n\n     describe('GET /', () => {\n         it('should get all transactions', (done) =>{\n             chai.request(app)\n                 .get('/api/v1/transaction/getall')\n                 .end((req,res)=>{\n                     res.should.have.status(200);\n                     res.body.should.be.a('object');\n                     res.body.should.have.property(\"data\").should.be.a('object');\n                     done();\n                 })\n         })\n     })\n})"]}